# Тестовое задание: "ЕГРЮЛ парсер"
Читает файл Единого государственного реестр юридических лиц (https://ofdata.ru/open-data/download/egrul.json.zip), выбирает компании, занимающиеся разработкой программного обеспечения (Группировка ОКВЭД 62), зарегистрированные в их макрорегионе (федеральном округе) и записывает информацию о выбранных компаниях (название компании, код ОКВЭД, ИНН, КПП и место регистрации ЮЛ) в базу данных.

## Описание
Программа(EGRUL_Parser.py) полностью написана на python, поэтому для обхода GIL(Global Interpreter Lock) применялся мультипроцессинг. Открывается архив, разбивается на чанки(размер чанков можно менять в программе в зависимости от комплектующих компьютера), эти чанки файлов обрабатываются в подпроцессах. Количество создаваемых подпроцессов по умолчанию установлено максимально возможное для вашего процессора без конкурентности, для максимального увеличения скорости работы. Программа обрабатывает записи из файлов в нужный для базы данных формат, а так же проверяет находится ли компания в своём федеральном округе и является ли она разработчиком ПО. Подключение и запись в БД происходит внутри процессов. Также в репозитории находится небольшой тестовый архив для проверки работы программы и тесты, которые можно запустить без зависимостей(TestParser.py).

## Установка
Чтобы запарсить все данные из ЕГРЮЛ, потребуется скачать архив в папку с сайта https://ofdata.ru/open-data/download/egrul.json.zip.
Также потребуется иметь подключение к БД Postgresql и установить все требующиеся используемые в проекте модули.
Так как это backend проект, то для подключение к своей БД и/или для парсинга стороннего архива потребуется изменить строчки кода.

207 строчка кода
```python
# EGRUL_Parser.py
def insert_data_to_db(data: list) -> None:
    conn = psycopg2.connect(
        database='your_db', user='your_username', password='your_password', host='your_host' # connect to your database
    )
```
251 строчка кода
```python
# EGRUL_Parser.py
def main():
    zip_filename = 'egrul.json.zip'
```
243 строчка кода
```python
# EGRUL_Parser.py
def parse_json_file(files: list) -> None:
    with zipfile.ZipFile('egrul.json.zip', 'r') as archive:
```
